import{Q as B}from"./QBadge-d93522fc.js";import{k as x,F as S,r as n,l as w,D as i,$ as k,aO as L,bn as E,m as c,G as u,t as p,v as h,p as f,w as M,x as g,n as N,O as R}from"./index-fb19aaf1.js";import{C as V,p as W,a as Y,b as O,B as F,c as P,L as Q,P as $,d as q,u as A,e as G,f as U}from"./useCharting-195c46f8.js";import{_ as j}from"./ErrorStates.vue_vue_type_script_setup_true_lang-678cba6e.js";import{u as z}from"./ui-b056b991.js";const H={key:0},I={key:0},J={class:"text-caption"},K="Best Watts",re=x({__name:"ChartBestWatts",props:{id:{},parentTable:{}},setup(_){const a=_;V.register(W,Y,O,F,P,Q,$,q);const{log:C}=S(),{getSingleChartOptions:b,getSingleChartDataset:y}=U(),D=z(),l=n(!1),s=n(0),d=n({labels:[],datasets:[]});w(async()=>{await m()}),A(m);async function m(){try{const{exerciseInputs:e}=await i.getRecord(a.parentTable,a.id);if((e==null?void 0:e.length)===0||!(e!=null&&e.includes(k.WATTS)))return;const r=await i.getSortedChildren(i.getChildTable(a.parentTable),a.id);if(r.length===0)return;const o=r.filter(t=>new Date().getTime()-t.createdTimestamp<=L[D.chartTime]);s.value=o.length;const T=o.map(t=>E.formatDate(t.createdTimestamp,"YYYY MMM D")),v=o.map(t=>Number(Math.max(...t.watts).toFixed(2)));d.value={labels:T,datasets:[y(v,"info","info")]},l.value=!0}catch(e){C.error("Error loading exercise best watts chart",e)}}return(e,r)=>l.value?(c(),u("section",H,[s.value>0?(c(),u("div",I,[p("div",{class:"text-h6"},h(K)),f(B,{rounded:"",color:"secondary",class:"q-py-none"},{default:M(()=>[p("span",J,h(s.value)+" records in time frame",1)]),_:1}),f(g(G),{options:g(b)(),data:d.value,style:{"max-height":"500px"}},null,8,["options","data"])])):(c(),N(j,{key:1,error:"no-data"}))])):R("",!0)}});export{re as default};
