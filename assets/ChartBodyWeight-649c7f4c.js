import{Q as I}from"./QBadge-6513a4e9.js";import{k as Y,F as O,r as s,aR as S,l as V,D as c,S as W,aO as G,bn as N,m as l,G as f,t as r,v as d,x as o,p as u,w as E,O as k,n as q}from"./index-ffd0294f.js";import{C as F,p as P,a as Q,b as U,B as K,c as $,L as j,P as z,d as A,u as J,e as w,f as X}from"./useCharting-a986e035.js";import{_ as Z}from"./ErrorStates.vue_vue_type_script_setup_true_lang-ff855ea3.js";import{u as ee}from"./ui-c377fbe5.js";const te={key:0},ae={key:0},se={class:"text-h6"},oe={class:"text-caption"},re={key:0},ne=r("div",{class:"text-h6"},"Body Mass Index (BMI)",-1),ie={class:"text-caption"},pe=Y({__name:"ChartBodyWeight",props:{id:{},parentTable:{}},setup(L){const n=L;F.register(P,Q,U,K,$,j,z,A);const{log:M}=O(),{getChartOptions:g,getChartData:_,getChartDataset:v}=X(),H=ee(),m=s(!1),t=s(void 0),i=s(0),R=S.BODY_WEIGHT,y=s({labels:[],datasets:[]}),C=s({labels:[],datasets:[]});V(async()=>{t.value=await c.getSettingValue(W.USER_HEIGHT_INCHES),await b()}),J(b);async function b(){try{const{measurementInput:a}=await c.getRecord(n.parentTable,n.id);if(!a)return;if(a===S.BODY_WEIGHT)m.value=!0;else{m.value=!1;return}const p=await c.getSortedChildren(c.getChildTable(n.parentTable),n.id);if(p.length===0)return;const h=p.filter(e=>new Date().getTime()-e.createdTimestamp<=G[H.chartTime]);i.value=h.length;const x=h.map(e=>N.formatDate(e.createdTimestamp,"YYYY MMM D")),D=h.map(e=>e.bodyWeight);if(y.value=_(x,v(D,"primary","info")),typeof t.value=="number"){const e=D.map(B=>{const T=t.value;return(B/(T*T)*703).toFixed(2)});C.value=_(x,v(e,"info","primary"))}}catch(a){M.error("Error loading measurement body weight chart",a)}}return(a,p)=>m.value?(l(),f("section",te,[i.value>0?(l(),f("div",ae,[r("div",se,d(o(R)),1),u(I,{rounded:"",color:"secondary",class:"q-py-none"},{default:E(()=>[r("span",oe,d(i.value)+" records in time frame",1)]),_:1}),u(o(w),{options:o(g)(),data:y.value,style:{"max-height":"500px"},class:"q-mb-xl"},null,8,["options","data"]),t.value?(l(),f("div",re,[ne,r("div",null,"Based on height of "+d(t.value)+" inches.",1),u(I,{rounded:"",color:"secondary",class:"q-py-none"},{default:E(()=>[r("span",ie,d(i.value)+" records in time frame",1)]),_:1}),u(o(w),{options:o(g)(),data:C.value,style:{"max-height":"500px"}},null,8,["options","data"])])):k("",!0)])):(l(),q(Z,{key:1,error:"no-data"}))])):k("",!0)}});export{pe as default};
