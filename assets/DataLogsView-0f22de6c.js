import{Q as L,a as y,b as k,c as B}from"./QTable-9e949039.js";import{k as q,W as O,A,F as E,r,a6 as F,D as Q,_ as U,m as i,n as f,w as o,p as s,G as x,M as C,L as T,K as m,z as V,x as u,I as b,t as c,Q as D,a1 as $,v as g,N as j,a7 as G,H as M,J as P}from"./index-3c86ed7e.js";import{Q as R}from"./QSelect-858652ff.js";import{u as z}from"./useRouting-14381c6d.js";import{u as H}from"./useDialogs-e947ab5c.js";import"./QList-bcb394d4.js";import"./QItem-cf5e025b.js";import"./QItemLabel-5b29e1cc.js";import"./QMenu-3e968ab3.js";import"./selection-ab68a012.js";import"./action-8f1b4305.js";import"./QSpace-2d58ec78.js";import"./ErrorStates.vue_vue_type_script_setup_true_lang-be687cf5.js";import"./ui-2236d8db.js";const J={class:"row justify-start full-width q-mb-md"},K=c("div",{class:"col-10 text-h6 text-bold ellipsis"},"Logs",-1),W={class:"row justify-start full-width"},X={class:"col-12"},pe=q({__name:"DataLogsView",setup(Y){O({title:`${A} - Logs Data Table`});const{log:_}=E(),{goBack:I}=z(),{inspectDialog:N}=H(),d=r(""),n=r([]),h=r(F.getTableColumns()),w=r(h.value.filter(a=>!a.required)),p=r(w.value.map(a=>a.name)),v=Q.liveLogs().subscribe({next:a=>n.value=a,error:a=>_.error("Error fetching live Logs",a)});U(()=>{v==null||v.unsubscribe()});async function S(a){const t=await Q.getLog(Number(a));t?N(t,G.LOGS):_.error("Failed to find Log",{autoId:a})}return(a,t)=>(i(),f(B,{rows:n.value,columns:h.value,"visible-columns":p.value,"rows-per-page-options":[0],filter:d.value,"virtual-scroll":"",fullscreen:"","row-key":"id"},{header:o(e=>[s(y,{props:e},{default:o(()=>[(i(!0),x(T,null,C(e.cols,l=>M((i(),f(L,{key:l.name,props:e},{default:o(()=>[m(g(l.label),1)]),_:2},1032,["props"])),[[P,l.name!=="hiddenAutoId"]])),128)),s(L,{"auto-width":"",class:"text-left"},{default:o(()=>[m("Actions")]),_:1})]),_:2},1032,["props"])]),body:o(e=>[s(y,{props:e},{default:o(()=>[(i(!0),x(T,null,C(e.cols,l=>(i(),f(k,{key:l.name,props:e},{default:o(()=>[m(g(l.value),1)]),_:2},1032,["props"]))),128)),s(k,{"auto-width":""},{default:o(()=>[s(V,{flat:"",round:"",dense:"",class:"q-ml-xs",color:"primary",icon:u(b).INSPECT,onClick:l=>S(e.cols[0].value)},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1032,["props"])]),top:o(()=>[c("div",J,[K,s(V,{round:"",flat:"",class:"absolute-top-right q-mr-sm q-mt-sm",icon:u(b).CLOSE,onClick:t[0]||(t[0]=e=>u(I)())},null,8,["icon"])]),c("div",W,[c("div",X,[s($,{disable:!n.value.length,outlined:"",dense:"",clearable:"",debounce:"300",modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),placeholder:"Search"},{before:o(()=>[s(R,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),options:w.value,disable:!n.value.length,"bg-color":"primary",standout:"",multiple:"",dense:"","options-dense":"","emit-value":"","map-options":"","option-value":"name","display-value":""},{prepend:o(()=>[s(D,{color:"white",name:u(b).OPTIONS},null,8,["name"])]),_:1},8,["modelValue","options","disable"])]),append:o(()=>[s(D,{name:"search"})]),_:1},8,["disable","modelValue"])])])]),bottom:o(()=>[m(g(u(j)(n.value)),1)]),_:1},8,["rows","columns","visible-columns","filter"]))}});export{pe as default};
