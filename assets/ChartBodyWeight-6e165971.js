import{Q as S}from"./QBadge-17edac61.js";import{k as R,F as Y,r as s,aR as T,l as O,D as c,S as V,aO as W,bn as G,m as l,G as h,t as n,v as d,x as o,p as u,w as I,O as E,n as N}from"./index-c45c6fd4.js";import{C as q,p as F,a as P,b as Q,B as U,c as K,L as $,P as j,d as z,u as A,e as k,f as J}from"./useCharting-87212237.js";import{_ as X}from"./ErrorStates.vue_vue_type_script_setup_true_lang-b93d4517.js";import{u as Z}from"./ui-6f0c53c1.js";const ee={key:0},te={key:0},ae={class:"text-h6"},se={class:"text-caption"},oe={key:0},ne=n("div",{class:"text-h6"},"Body Mass Index (BMI)",-1),re={class:"text-caption"},me=R({__name:"ChartBodyWeight",props:{id:{},parentTable:{}},setup(w){const r=w;q.register(F,P,Q,U,K,$,j,z);const{log:L}=Y(),{getSingleChartOptions:g,getSingleChartDataset:f}=J(),M=Z(),_=s(!1),t=s(void 0),i=s(0),H=T.BODY_WEIGHT,y=s({labels:[],datasets:[]}),v=s({labels:[],datasets:[]});O(async()=>{t.value=await c.getSettingValue(V.USER_HEIGHT_INCHES),await b()}),A(b);async function b(){try{const{measurementInput:a}=await c.getRecord(r.parentTable,r.id);if(!a||a!==T.BODY_WEIGHT)return;const m=await c.getSortedChildren(c.getChildTable(r.parentTable),r.id);if(m.length===0)return;const p=m.filter(e=>new Date().getTime()-e.createdTimestamp<=W[M.chartTime]);i.value=p.length;const C=p.map(e=>G.formatDate(e.createdTimestamp,"YYYY MMM D")),x=p.map(e=>e.bodyWeight);if(y.value={labels:C,datasets:[f(x,"primary","info")]},typeof t.value=="number"){const e=x.map(B=>{const D=t.value;return(B/(D*D)*703).toFixed(2)});v.value={labels:C,datasets:[f(e,"info","primary")]}}_.value=!0}catch(a){L.error("Error loading measurement body weight chart",a)}}return(a,m)=>_.value?(l(),h("section",ee,[i.value>0?(l(),h("div",te,[n("div",ae,d(o(H)),1),u(S,{rounded:"",color:"secondary",class:"q-py-none"},{default:I(()=>[n("span",se,d(i.value)+" records in time frame",1)]),_:1}),u(o(k),{options:o(g)(),data:y.value,style:{"max-height":"500px"},class:"q-mb-xl"},null,8,["options","data"]),t.value?(l(),h("div",oe,[ne,n("div",null,"Based on height of "+d(t.value)+" inches.",1),u(S,{rounded:"",color:"secondary",class:"q-py-none"},{default:I(()=>[n("span",re,d(i.value)+" records in time frame",1)]),_:1}),u(o(k),{options:o(g)(),data:v.value,style:{"max-height":"500px"}},null,8,["options","data"])])):E("",!0)])):(l(),N(X,{key:1,error:"no-data"}))])):E("",!0)}});export{me as default};
