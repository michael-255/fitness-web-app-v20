import{Q as T}from"./QBadge-3f262af5.js";import{k as x,F as w,r as o,l as L,D as i,$ as S,aO as k,bn as E,m as c,G as u,t as h,v as p,p as g,w as M,x as f,n as N,O as R}from"./index-3058d064.js";import{C as V,p as W,a as Y,b as O,B as F,c as G,L as P,P as Q,d as $,u as q,e as H,f as I}from"./useCharting-8891d5e8.js";import{_ as U}from"./ErrorStates.vue_vue_type_script_setup_true_lang-63b3acc7.js";import{u as j}from"./ui-98f63de9.js";const z={key:0},A={key:0},J={class:"text-caption"},K="Best Weight (lbs)",re=x({__name:"ChartBestWeight",props:{id:{},parentTable:{}},setup(_){const a=_;V.register(W,Y,O,F,G,P,Q,$);const{log:b}=w(),{getSingleChartOptions:C,getSingleChartDataset:v}=I(),y=j(),l=o(!1),s=o(0),d=o({labels:[],datasets:[]});L(async()=>{await m()}),q(m);async function m(){try{const{exerciseInputs:e}=await i.getRecord(a.parentTable,a.id);if((e==null?void 0:e.length)===0||!(e!=null&&e.includes(S.WEIGHT)))return;const r=await i.getSortedChildren(i.getChildTable(a.parentTable),a.id);if(r.length===0)return;const n=r.filter(t=>new Date().getTime()-t.createdTimestamp<=k[y.chartTime]);s.value=n.length;const D=n.map(t=>E.formatDate(t.createdTimestamp,"YYYY MMM D")),B=n.map(t=>Number(Math.max(...t.weightLbs).toFixed(2)));d.value={labels:D,datasets:[v(B,"negative","negative")]},l.value=!0}catch(e){b.error("Error loading exercise best weight chart",e)}}return(e,r)=>l.value?(c(),u("section",z,[s.value>0?(c(),u("div",A,[h("div",{class:"text-h6"},p(K)),g(T,{rounded:"",color:"secondary",class:"q-py-none"},{default:M(()=>[h("span",J,p(s.value)+" records in time frame",1)]),_:1}),g(f(H),{options:f(C)(),data:d.value,style:{"max-height":"500px"}},null,8,["options","data"])])):(c(),N(U,{key:1,error:"no-data"}))])):R("",!0)}});export{re as default};
