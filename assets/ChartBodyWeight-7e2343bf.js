import{Q as S}from"./QBadge-0e554717.js";import{k as R,F as Y,r as s,aR as T,l as O,D as c,S as V,aO as W,bn as G,m as l,G as h,t as r,v as d,x as n,p as u,w as I,O as w,n as N}from"./index-170dd336.js";import{C as q,p as F,a as P,b as Q,B as U,c as K,L as $,P as j,d as z,u as A,e as E,f as J}from"./useCharting-68c7fcf7.js";import{_ as X}from"./ErrorStates.vue_vue_type_script_setup_true_lang-418685a4.js";import{u as Z}from"./ui-9729b3cb.js";const ee={key:0},te={key:0},ae={class:"text-h6"},se={class:"text-caption"},ne={key:0},re=r("div",{class:"text-h6"},"Body Mass Index (BMI)",-1),oe={class:"text-caption"},me=R({__name:"ChartBodyWeight",props:{id:{},parentTable:{}},setup(k){const o=k;q.register(F,P,Q,U,K,$,j,z);const{log:L}=Y(),{getSingleChartOptions:g,getSingleChartDataset:_}=J(),M=Z(),f=s(!1),t=s(void 0),i=s(0),H=T.BODY_WEIGHT,y=s({labels:[],datasets:[]}),v=s({labels:[],datasets:[]});O(async()=>{t.value=await c.getSettingValue(V.USER_HEIGHT_INCHES),await b()}),A(b);async function b(){try{const{measurementInput:a}=await c.getRecord(o.parentTable,o.id);if(!a||a!==T.BODY_WEIGHT)return;const m=await c.getSortedChildren(c.getChildTable(o.parentTable),o.id);if(m.length===0)return;const p=m.filter(e=>new Date().getTime()-e.createdTimestamp<=W[M.chartTime]);i.value=p.length;const C=p.map(e=>G.formatDate(e.createdTimestamp,"YYYY MMM D")),x=p.map(e=>e.bodyWeight);if(y.value={labels:C,datasets:[_(x,"primary","primary")]},typeof t.value=="number"){const e=x.map(B=>{const D=t.value;return(B/(D*D)*703).toFixed(2)});v.value={labels:C,datasets:[_(e,"warning","warning")]}}f.value=!0}catch(a){L.error("Error loading measurement body weight chart",a)}}return(a,m)=>f.value?(l(),h("section",ee,[i.value>0?(l(),h("div",te,[r("div",ae,d(n(H)),1),u(S,{rounded:"",color:"secondary",class:"q-py-none"},{default:I(()=>[r("span",se,d(i.value)+" records in time frame",1)]),_:1}),u(n(E),{options:n(g)(),data:y.value,style:{"max-height":"500px"},class:"q-mb-xl"},null,8,["options","data"]),t.value?(l(),h("div",ne,[re,r("div",null,"Based on height of "+d(t.value)+" inches.",1),u(S,{rounded:"",color:"secondary",class:"q-py-none"},{default:I(()=>[r("span",oe,d(i.value)+" records in time frame",1)]),_:1}),u(n(E),{options:n(g)(),data:v.value,style:{"max-height":"500px"}},null,8,["options","data"])])):w("",!0)])):(l(),N(X,{key:1,error:"no-data"}))])):w("",!0)}});export{me as default};
