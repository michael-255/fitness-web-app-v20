import{c as k,h as C,g as P,aV as $,aW as x,aX as I,r as v,a$ as W,e as d,a6 as f,ac as E,f as K,b0 as M,k as j,F as U,l as X,D as G,T as J,m as T,n as B,w as c,p as n,b1 as Y,b2 as Z,x as b,b3 as ee,b4 as q,b5 as te,K as ae,v as z,z as D,I as _,O as oe,R as ne,b6 as se,b7 as le,aP as ue,ap as re,Q as ie,t as ce,b8 as de}from"./index-26174ac4.js";import{u as fe}from"./useDialogs-efd4deb2.js";import{b as ve}from"./index-94ebf0d8.js";import"./action-c3948de2.js";import"./QSelect-4607d717.js";import"./QItem-9936e606.js";import"./QItemLabel-c08b08fa.js";import"./QMenu-f6a9d5ab.js";import"./selection-0290b496.js";import"./ui-327ae146.js";const me=C("div",{class:"q-space"}),R=k({name:"QSpace",setup(){return()=>me}}),he=k({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(a,{slots:Q,emit:w}){const{proxy:{$q:m}}=P(),t=$(I,x);if(t===x)return console.error("QFooter needs to be child of QLayout"),x;const u=v(parseInt(a.heightHint,10)),s=v(!0),y=v(W.value===!0||t.isContainer.value===!0?0:window.innerHeight),h=d(()=>a.reveal===!0||t.view.value.indexOf("F")>-1||m.platform.is.ios&&t.isContainer.value===!0),p=d(()=>t.isContainer.value===!0?t.containerHeight.value:y.value),o=d(()=>{if(a.modelValue!==!0)return 0;if(h.value===!0)return s.value===!0?u.value:0;const e=t.scroll.value.position+p.value+u.value-t.height.value;return e>0?e:0}),r=d(()=>a.modelValue!==!0||h.value===!0&&s.value!==!0),V=d(()=>a.modelValue===!0&&r.value===!0&&a.reveal===!0),F=d(()=>"q-footer q-layout__section--marginal "+(h.value===!0?"fixed":"absolute")+"-bottom"+(a.bordered===!0?" q-footer--bordered":"")+(r.value===!0?" q-footer--hidden":"")+(a.modelValue!==!0?" q-layout--prevent-focus"+(h.value!==!0?" hidden":""):"")),N=d(()=>{const e=t.rows.value.bottom,l={};return e[0]==="l"&&t.left.space===!0&&(l[m.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),e[2]==="r"&&t.right.space===!0&&(l[m.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),l});function i(e,l){t.update("footer",e,l)}function g(e,l){e.value!==l&&(e.value=l)}function O({height:e}){g(u,e),i("size",e)}function S(){if(a.reveal!==!0)return;const{direction:e,position:l,inflectionPoint:L}=t.scroll.value;g(s,e==="up"||l-L<100||t.height.value-p.value-l-u.value<300)}function A(e){V.value===!0&&g(s,!0),w("focusin",e)}f(()=>a.modelValue,e=>{i("space",e),g(s,!0),t.animate()}),f(o,e=>{i("offset",e)}),f(()=>a.reveal,e=>{e===!1&&g(s,a.modelValue)}),f(s,e=>{t.animate(),w("reveal",e)}),f([u,t.scroll,t.height],S),f(()=>m.screen.height,e=>{t.isContainer.value!==!0&&g(y,e)});const H={};return t.instances.footer=H,a.modelValue===!0&&i("size",u.value),i("space",a.modelValue),i("offset",o.value),E(()=>{t.instances.footer===H&&(t.instances.footer=void 0,i("size",0),i("offset",0),i("space",!1))}),()=>{const e=K(Q.default,[C(M,{debounce:0,onResize:O})]);return a.elevated===!0&&e.push(C("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),C("footer",{class:F.value,style:N.value,onFocusin:A},e)}}}),pe={class:"text-h6"},Be=j({__name:"ActiveLayout",setup(a){const{log:Q}=U(),{dismissDialog:w}=fe(),m=ve(1e3),t=v(""),u=v(Date.now()),s=v(""),y=v("");X(async()=>{var p;try{const{parentWorkout:o,workoutResult:r}=await G.getActiveWorkout();o&&(o.name&&(t.value=o.name),(p=o==null?void 0:o.previousChild)!=null&&p.note&&(s.value=o.previousChild.note)),r&&r.createdTimestamp&&(u.value=r.createdTimestamp)}catch(o){Q.error("Errors with active workout layout",o)}});function h(){w("Previous Workout Note",s.value,_.NOTE)}return f(m,()=>{y.value=J(Date.now()-u.value)||""}),(p,o)=>(T(),B(de,{view:"hHh LpR fFf"},{default:c(()=>[n(Y,{elevated:"",class:Z(`bg-${b(ee)}`)},{default:c(()=>[n(q,null,{default:c(()=>[n(te,{class:"q-ml-xs"},{default:c(()=>[ae(z(t.value),1)]),_:1}),s.value?(T(),B(D,{key:0,flat:"",round:"",icon:b(_).NOTE,class:"q-mr-xs",onClick:o[0]||(o[0]=r=>h())},null,8,["icon"])):oe("",!0),n(D,{flat:"",round:"",icon:b(_).BACK,to:{name:b(ne).DASHBOARD}},null,8,["icon","to"])]),_:1})]),_:1},8,["class"]),n(se,null,{default:c(()=>[n(b(le),null,{default:c(({Component:r,route:V})=>[n(ue,{name:"global-fade",mode:"out-in"},{default:c(()=>[(T(),B(re(r),{key:V.path}))]),_:2},1024)]),_:1})]),_:1}),n(he,{elevated:"",class:"bg-primary"},{default:c(()=>[n(q,null,{default:c(()=>[n(R),n(ie,{name:b(_).STOPWATCH,size:"sm",class:"q-mr-sm"},null,8,["name"]),ce("div",pe,z(y.value),1),n(R)]),_:1})]),_:1})]),_:1}))}});export{Be as default};
