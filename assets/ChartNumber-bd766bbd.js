import{Q as E}from"./QBadge-6513a4e9.js";import{k as L,F as M,r as o,aR as p,l as R,D as i,aO as w,bn as N,m as c,G as h,t as f,v as g,x as l,p as _,w as S,n as I,O as V}from"./index-ffd0294f.js";import{C as Y,p as O,a as U,b as P,B as Q,c as q,L as F,P as G,d as W,u as $,e as j,f as z}from"./useCharting-a986e035.js";import{_ as A}from"./ErrorStates.vue_vue_type_script_setup_true_lang-ff855ea3.js";import{u as H}from"./ui-c377fbe5.js";const J={key:0},K={key:0},X={class:"text-h6"},Z={class:"text-caption"},oe=L({__name:"ChartNumber",props:{id:{},parentTable:{}},setup(C){const a=C;Y.register(O,U,P,Q,q,F,G,W);const{log:b}=M(),{getChartOptions:y,getChartData:D,getChartDataset:v}=z(),B=H(),m=o(!1),r=o(0),T=p.NUMBER,u=o({labels:[],datasets:[]});R(async()=>{await d()}),$(d);async function d(){try{const{measurementInput:e}=await i.getRecord(a.parentTable,a.id);if(!e)return;e===p.NUMBER&&(m.value=!0);const s=await i.getSortedChildren(i.getChildTable(a.parentTable),a.id);if(s.length===0)return;const n=s.filter(t=>new Date().getTime()-t.createdTimestamp<=w[B.chartTime]);r.value=n.length;const x=n.map(t=>N.formatDate(t.createdTimestamp,"YYYY MMM D")),k=n.map(t=>t.number);u.value=D(x,v(k,"primary","info"))}catch(e){b.error("Error loading measurement number chart",e)}}return(e,s)=>m.value?(c(),h("section",J,[r.value>0?(c(),h("div",K,[f("div",X,g(l(T)),1),_(E,{rounded:"",color:"secondary",class:"q-py-none"},{default:S(()=>[f("span",Z,g(r.value)+" records in time frame",1)]),_:1}),_(l(j),{options:l(y)(),data:u.value,style:{"max-height":"500px"}},null,8,["options","data"])])):(c(),I(A,{key:1,error:"no-data"}))])):V("",!0)}});export{oe as default};
