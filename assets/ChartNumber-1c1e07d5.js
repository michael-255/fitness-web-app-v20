import{Q as S}from"./QBadge-d93522fc.js";import{k,F as E,r as o,aR as p,l as L,D as i,aO as M,bn as N,m as c,G as h,t as f,v as g,x as l,p as _,w as R,n as w,O as I}from"./index-fb19aaf1.js";import{C as V,p as Y,a as O,b as U,B as F,c as P,L as Q,P as q,d as G,u as W,e as $,f as j}from"./useCharting-195c46f8.js";import{_ as z}from"./ErrorStates.vue_vue_type_script_setup_true_lang-678cba6e.js";import{u as A}from"./ui-b056b991.js";const H={key:0},J={key:0},K={class:"text-h6"},X={class:"text-caption"},ne=k({__name:"ChartNumber",props:{id:{},parentTable:{}},setup(b){const a=b;V.register(Y,O,U,F,P,Q,q,G);const{log:C}=E(),{getSingleChartOptions:y,getSingleChartDataset:D}=j(),v=A(),m=o(!1),r=o(0),B=p.NUMBER,u=o({labels:[],datasets:[]});L(async()=>{await d()}),W(d);async function d(){try{const{measurementInput:e}=await i.getRecord(a.parentTable,a.id);if(!e||e!==p.NUMBER)return;const s=await i.getSortedChildren(i.getChildTable(a.parentTable),a.id);if(s.length===0)return;const n=s.filter(t=>new Date().getTime()-t.createdTimestamp<=M[v.chartTime]);r.value=n.length;const x=n.map(t=>N.formatDate(t.createdTimestamp,"YYYY MMM D")),T=n.map(t=>Number(t.number.toFixed(2)));u.value={labels:x,datasets:[D(T,"primary","primary")]},m.value=!0}catch(e){C.error("Error loading measurement number chart",e)}}return(e,s)=>m.value?(c(),h("section",H,[r.value>0?(c(),h("div",J,[f("div",K,g(l(B)),1),_(S,{rounded:"",color:"secondary",class:"q-py-none"},{default:R(()=>[f("span",X,g(r.value)+" records in time frame",1)]),_:1}),_(l($),{options:l(y)(),data:u.value,style:{"max-height":"500px"}},null,8,["options","data"])])):(c(),w(z,{key:1,error:"no-data"}))])):I("",!0)}});export{ne as default};
