import{Q as x}from"./QBadge-80c64e12.js";import{k as R,F as M,r as c,l as N,D as l,$ as p,aO as V,bn as W,m as d,G as f,t as _,v as C,p as b,w as Y,x as T,n as O,O as P}from"./index-9194136f.js";import{C as F,p as G,a as Q,b as $,B as q,c as H,L as U,P as j,d as z,u as A,e as J,f as K}from"./useCharting-cf56e039.js";import{_ as X}from"./ErrorStates.vue_vue_type_script_setup_true_lang-6a894945.js";import{u as Z}from"./ui-ea2f5093.js";const I={key:0},ee={key:0},te={class:"text-caption"},ae="Total Weight (lbs)",le=R({__name:"ChartTotalWeight",props:{id:{},parentTable:{}},setup(w){const a=w;F.register(G,Q,$,q,H,U,j,z);const{log:y}=M(),{getSingleChartOptions:D,getSingleChartDataset:v}=K(),S=Z(),m=c(!1),s=c(0),u=c({labels:[],datasets:[]});N(async()=>{await h()}),A(h);async function h(){try{const{exerciseInputs:e}=await l.getRecord(a.parentTable,a.id);if(e!=null&&e.length&&e.length<2||!(e!=null&&e.includes(p.WEIGHT))||!(e!=null&&e.includes(p.REPS)))return;const r=await l.getSortedChildren(l.getChildTable(a.parentTable),a.id);if(r.length===0)return;const o=r.filter(t=>new Date().getTime()-t.createdTimestamp<=V[S.chartTime]);s.value=o.length;const B=o.map(t=>W.formatDate(t.createdTimestamp,"YYYY MMM D")),E=o.map(t=>{const g=t.reps,L=t.weightLbs,k=g.map((n,i)=>n*L[i]).reduce((n,i)=>n+i,0);return Number(k.toFixed(2))});u.value={labels:B,datasets:[v(E,"warning","warning")]},m.value=!0}catch(e){y.error("Error loading exercise total weight chart",e)}}return(e,r)=>m.value?(d(),f("section",I,[s.value>0?(d(),f("div",ee,[_("div",{class:"text-h6"},C(ae)),b(x,{rounded:"",color:"secondary",class:"q-py-none"},{default:Y(()=>[_("span",te,C(s.value)+" records in time frame",1)]),_:1}),b(T(J),{options:T(D)(),data:u.value,style:{"max-height":"500px"}},null,8,["options","data"])])):(d(),O(X,{key:1,error:"no-data"}))])):P("",!0)}});export{le as default};
