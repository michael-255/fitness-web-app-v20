import{e as d,bp as E,bq as bt,c as Xe,a as ut,a4 as ot,g as Ze,a5 as it,d as rt,r as F,ah as qt,br as at,bs as st,bt as wt,bu as Ue,a6 as oe,bv as je,ai as Ge,h as r,aP as xe,a2 as ct,i as dt,z as U,al as kt,C as xt,aF as Ct,ar as Mt,H as Dt,bw as Ht,bx as St,by as Vt,bz as Ot}from"./index-e487f782.js";import{u as Yt,a as jt,Q as Tt}from"./QMenu-4706090f.js";import{T as It}from"./TouchPan-46115c78.js";function Ft(){const t=new Map;return{getCache:function(b,k){return t[b]===void 0?t[b]=k:t[b]},getCacheWithFn:function(b,k){return t[b]===void 0?t[b]=k():t[b]}}}const Pt=["gregorian","persian"],vt={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:t=>Pt.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ft=["update:modelValue"];function X(t){return t.year+"/"+E(t.month)+"/"+E(t.day)}function mt(t,b){const k=d(()=>t.disable!==!0&&t.readonly!==!0),j=d(()=>k.value===!0?0:-1),D=d(()=>{const x=[];return t.color!==void 0&&x.push(`bg-${t.color}`),t.textColor!==void 0&&x.push(`text-${t.textColor}`),x.join(" ")});function Z(){return t.locale!==void 0?{...b.lang.date,...t.locale}:b.lang.date}function M(x){const Q=new Date,N=x===!0?null:0;if(t.calendar==="persian"){const K=bt(Q);return{year:K.jy,month:K.jm,day:K.jd}}return{year:Q.getFullYear(),month:Q.getMonth()+1,day:Q.getDate(),hour:N,minute:N,second:N,millisecond:N}}return{editable:k,tabindex:j,headerClass:D,getLocale:Z,getCurrentDate:M}}const ve=20,At=["Calendar","Years","Months"],nt=t=>At.includes(t),Je=t=>/^-?[\d]+\/[0-1]\d$/.test(t),ke=" â€” ";function ue(t){return t.year+"/"+E(t.month)}const Lt=Xe({name:"QDate",props:{...vt,...ut,...ot,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Je},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Je},navigationMaxYearMonth:{type:String,validator:Je},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:nt}},emits:[...ft,"rangeStart","rangeEnd","navigation"],setup(t,{slots:b,emit:k}){const{proxy:j}=Ze(),{$q:D}=j,Z=it(t,D),{getCache:M}=Ft(),{tabindex:x,headerClass:Q,getLocale:N,getCurrentDate:K}=mt(t,D);let L;const ee=rt(t),te=dt(ee),ae=F(null),q=F(Ke()),w=F(N()),Te=d(()=>Ke()),fe=d(()=>N()),f=d(()=>K()),u=F(l(q.value,w.value)),_=F(t.defaultView),Ie=D.lang.rtl===!0?"right":"left",ne=F(Ie.value),T=F(Ie.value),Ce=u.value.year,ie=F(Ce-Ce%ve-(Ce<0?ve:0)),I=F(null),re=d(()=>{const e=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${t.minimal===!0?"minimal":"standard"}`+(Z.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),z=d(()=>t.color||"primary"),p=d(()=>t.textColor||"white"),P=d(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),J=d(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),Y=d(()=>J.value.filter(e=>typeof e=="string").map(e=>Oe(e,q.value,w.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),R=d(()=>{const e=a=>Oe(a,q.value,w.value);return J.value.filter(a=>qt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:e(a.from),to:e(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),me=d(()=>t.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const a=at(e.year,e.month,e.day);return new Date(a.gy,a.gm-1,a.gd)}),Me=d(()=>t.calendar==="persian"?X:(e,a,n)=>st(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a===void 0?q.value:a,n===void 0?w.value:n,e.year,e.timezoneOffset)),le=d(()=>Y.value.length+R.value.reduce((e,a)=>e+1+wt(me.value(a.to),me.value(a.from)),0)),se=d(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length!==0)return t.title;if(I.value!==null){const n=I.value.init,s=me.value(n);return w.value.daysShort[s.getDay()]+", "+w.value.monthsShort[n.month-1]+" "+n.day+ke+"?"}if(le.value===0)return ke;if(le.value>1)return`${le.value} ${w.value.pluralDay}`;const e=Y.value[0],a=me.value(e);return isNaN(a.valueOf())===!0?ke:w.value.headerTitle!==void 0?w.value.headerTitle(a,e):w.value.daysShort[a.getDay()]+", "+w.value.monthsShort[e.month-1]+" "+e.day}),Fe=d(()=>Y.value.concat(R.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),De=d(()=>Y.value.concat(R.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),Pe=d(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length!==0)return t.subtitle;if(le.value===0)return ke;if(le.value>1){const e=Fe.value,a=De.value,n=w.value.monthsShort;return n[e.month-1]+(e.year!==a.year?" "+e.year+ke+n[a.month-1]+" ":e.month!==a.month?ke+n[a.month-1]:"")+" "+a.year}return Y.value[0].year}),he=d(()=>{const e=[D.iconSet.datetime.arrowLeft,D.iconSet.datetime.arrowRight];return D.lang.rtl===!0?e.reverse():e}),ye=d(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):w.value.firstDayOfWeek),He=d(()=>{const e=w.value.daysShort,a=ye.value;return a>0?e.slice(a,7).concat(e.slice(0,a)):e}),W=d(()=>{const e=u.value;return t.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Ue(e.year,e.month)}),Ae=d(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),V=d(()=>{if(t.navigationMinYearMonth===void 0)return null;const e=t.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),O=d(()=>{if(t.navigationMaxYearMonth===void 0)return null;const e=t.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Se=d(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return V.value!==null&&V.value.year>=u.value.year&&(e.year.prev=!1,V.value.year===u.value.year&&V.value.month>=u.value.month&&(e.month.prev=!1)),O.value!==null&&O.value.year<=u.value.year&&(e.year.next=!1,O.value.year===u.value.year&&O.value.month<=u.value.month&&(e.month.next=!1)),e}),ge=d(()=>{const e={};return Y.value.forEach(a=>{const n=ue(a);e[n]===void 0&&(e[n]=[]),e[n].push(a.day)}),e}),Be=d(()=>{const e={};return R.value.forEach(a=>{const n=ue(a.from),s=ue(a.to);if(e[n]===void 0&&(e[n]=[]),e[n].push({from:a.from.day,to:n===s?a.to.day:void 0,range:a}),n<s){let i;const{year:g,month:c}=a.from,m=c<12?{year:g,month:c+1}:{year:g+1,month:1};for(;(i=ue(m))<=s;)e[i]===void 0&&(e[i]=[]),e[i].push({from:void 0,to:i===s?a.to.day:void 0,range:a}),m.month++,m.month>12&&(m.year++,m.month=1)}}),e}),ce=d(()=>{if(I.value===null)return;const{init:e,initHash:a,final:n,finalHash:s}=I.value,[i,g]=a<=s?[e,n]:[n,e],c=ue(i),m=ue(g);if(c!==A.value&&m!==A.value)return;const C={};return c===A.value?(C.from=i.day,C.includeFrom=!0):C.from=1,m===A.value?(C.to=g.day,C.includeTo=!0):C.to=W.value,C}),A=d(()=>ue(u.value)),ze=d(()=>{const e={};if(t.options===void 0){for(let n=1;n<=W.value;n++)e[n]=!0;return e}const a=typeof t.options=="function"?t.options:n=>t.options.includes(n);for(let n=1;n<=W.value;n++){const s=A.value+"/"+E(n);e[n]=a(s)}return e}),Qe=d(()=>{const e={};if(t.events===void 0)for(let a=1;a<=W.value;a++)e[a]=!1;else{const a=typeof t.events=="function"?t.events:n=>t.events.includes(n);for(let n=1;n<=W.value;n++){const s=A.value+"/"+E(n);e[n]=a(s)===!0&&Ae.value(s)}}return e}),_e=d(()=>{let e,a;const{year:n,month:s}=u.value;if(t.calendar!=="persian")e=new Date(n,s-1,1),a=new Date(n,s-1,0).getDate();else{const i=at(n,s,1);e=new Date(i.gy,i.gm-1,i.gd);let g=s-1,c=n;g===0&&(g=12,c--),a=Ue(c,g)}return{days:e.getDay()-ye.value-1,endDay:a}}),de=d(()=>{const e=[],{days:a,endDay:n}=_e.value,s=a<0?a+7:a;if(s<6)for(let c=n-s;c<=n;c++)e.push({i:c,fill:!0});const i=e.length;for(let c=1;c<=W.value;c++){const m={i:c,event:Qe.value[c],classes:[]};ze.value[c]===!0&&(m.in=!0,m.flat=!0),e.push(m)}if(ge.value[A.value]!==void 0&&ge.value[A.value].forEach(c=>{const m=i+c-1;Object.assign(e[m],{selected:!0,unelevated:!0,flat:!1,color:z.value,textColor:p.value})}),Be.value[A.value]!==void 0&&Be.value[A.value].forEach(c=>{if(c.from!==void 0){const m=i+c.from-1,C=i+(c.to||W.value)-1;for(let Ye=m;Ye<=C;Ye++)Object.assign(e[Ye],{range:c.range,unelevated:!0,color:z.value,textColor:p.value});Object.assign(e[m],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(e[C],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const m=i+c.to-1;for(let C=i;C<=m;C++)Object.assign(e[C],{range:c.range,unelevated:!0,color:z.value,textColor:p.value});Object.assign(e[m],{flat:!1,rangeTo:!0})}else{const m=i+W.value-1;for(let C=i;C<=m;C++)Object.assign(e[C],{range:c.range,unelevated:!0,color:z.value,textColor:p.value})}}),ce.value!==void 0){const c=i+ce.value.from-1,m=i+ce.value.to-1;for(let C=c;C<=m;C++)e[C].color=z.value,e[C].editRange=!0;ce.value.includeFrom===!0&&(e[c].editRangeFrom=!0),ce.value.includeTo===!0&&(e[m].editRangeTo=!0)}u.value.year===f.value.year&&u.value.month===f.value.month&&(e[i+f.value.day-1].today=!0);const g=e.length%7;if(g>0){const c=7-g;for(let m=1;m<=c;m++)e.push({i:m,fill:!0})}return e.forEach(c=>{let m="q-date__calendar-item ";c.fill===!0?m+="q-date__calendar-item--fill":(m+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(m+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(m+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(m+=` text-${c.color}`)),c.classes=m}),e}),be=d(()=>t.disable===!0?{"aria-disabled":"true"}:t.readonly===!0?{"aria-readonly":"true"}:{});oe(()=>t.modelValue,e=>{if(L===e)L=0;else{const a=l(q.value,w.value);B(a.year,a.month,a)}}),oe(_,()=>{ae.value!==null&&j.$el.contains(document.activeElement)===!0&&ae.value.focus()}),oe(()=>u.value.year+"|"+u.value.month,()=>{k("navigation",{year:u.value.year,month:u.value.month})}),oe(Te,e=>{tt(e,w.value,"mask"),q.value=e}),oe(fe,e=>{tt(q.value,e,"locale"),w.value=e});function $e(){const e=f.value,a=ge.value[ue(e)];(a===void 0||a.includes(e.day)===!1)&&pe(e),G(e.year,e.month)}function Ee(e){nt(e)===!0&&(_.value=e)}function Ne(e,a){["month","year"].includes(e)&&(e==="month"?v:h)(a===!0?-1:1)}function G(e,a){_.value="Calendar",B(e,a)}function Ve(e,a){if(t.range===!1||!e){I.value=null;return}const n=Object.assign({...u.value},e),s=a!==void 0?Object.assign({...u.value},a):n;I.value={init:n,initHash:X(n),final:s,finalHash:X(s)},G(n.year,n.month)}function Ke(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Oe(e,a,n){return je(e,a,n,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function l(e,a){const n=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(n.length===0)return o();const s=n[n.length-1],i=Oe(s.from!==void 0?s.from:s,e,a);return i.dateHash===null?o():i}function o(){let e,a;if(t.defaultYearMonth!==void 0){const n=t.defaultYearMonth.split("/");e=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=f.value!==void 0?f.value:K();e=n.year,a=n.month}return{year:e,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+E(a)+"/01"}}function v(e){let a=u.value.year,n=Number(u.value.month)+e;n===13?(n=1,a++):n===0&&(n=12,a--),B(a,n),P.value===!0&&qe("month")}function h(e){const a=Number(u.value.year)+e;B(a,u.value.month),P.value===!0&&qe("year")}function H(e){B(e,u.value.month),_.value=t.defaultView==="Years"?"Months":"Calendar",P.value===!0&&qe("year")}function $(e){B(u.value.year,e),_.value="Calendar",P.value===!0&&qe("month")}function y(e,a){const n=ge.value[a];(n!==void 0&&n.includes(e.day)===!0?Re:pe)(e)}function S(e){return{year:e.year,month:e.month,day:e.day}}function B(e,a,n){if(V.value!==null&&e<=V.value.year&&(e=V.value.year,a<V.value.month&&(a=V.value.month)),O.value!==null&&e>=O.value.year&&(e=O.value.year,a>O.value.month&&(a=O.value.month)),n!==void 0){const{hour:i,minute:g,second:c,millisecond:m,timezoneOffset:C,timeHash:Ye}=n;Object.assign(u.value,{hour:i,minute:g,second:c,millisecond:m,timezoneOffset:C,timeHash:Ye})}const s=e+"/"+E(a)+"/01";s!==u.value.dateHash&&(ne.value=u.value.dateHash<s==(D.lang.rtl!==!0)?"left":"right",e!==u.value.year&&(T.value=ne.value),Ge(()=>{ie.value=e-e%ve-(e<0?ve:0),Object.assign(u.value,{year:e,month:a,day:1,dateHash:s})}))}function Le(e,a,n){const s=e!==null&&e.length===1&&t.multiple===!1?e[0]:e;L=s;const{reason:i,details:g}=et(a,n);k("update:modelValue",s,i,g)}function qe(e){const a=Y.value[0]!==void 0&&Y.value[0].dateHash!==null?{...Y.value[0]}:{...u.value};Ge(()=>{a.year=u.value.year,a.month=u.value.month;const n=t.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ue(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const s=we(a);L=s;const{details:i}=et("",a);k("update:modelValue",s,e,i)})}function et(e,a){return a.from!==void 0?{reason:`${e}-range`,details:{...S(a.target),from:S(a.from),to:S(a.to)}}:{reason:`${e}-day`,details:S(a)}}function we(e,a,n){return e.from!==void 0?{from:Me.value(e.from,a,n),to:Me.value(e.to,a,n)}:Me.value(e,a,n)}function pe(e){let a;if(t.multiple===!0)if(e.from!==void 0){const n=X(e.from),s=X(e.to),i=Y.value.filter(c=>c.dateHash<n||c.dateHash>s),g=R.value.filter(({from:c,to:m})=>m.dateHash<n||c.dateHash>s);a=i.concat(g).concat(e).map(c=>we(c))}else{const n=J.value.slice();n.push(we(e)),a=n}else a=we(e);Le(a,"add",e)}function Re(e){if(t.noUnset===!0)return;let a=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const n=we(e);e.from!==void 0?a=t.modelValue.filter(s=>s.from!==void 0?s.from!==n.from&&s.to!==n.to:!0):a=t.modelValue.filter(s=>s!==n),a.length===0&&(a=null)}Le(a,"remove",e)}function tt(e,a,n){const s=Y.value.concat(R.value).map(i=>we(i,e,a)).filter(i=>i.from!==void 0?i.from.dateHash!==null&&i.to.dateHash!==null:i.dateHash!==null);k("update:modelValue",(t.multiple===!0?s:s[0])||null,n)}function ht(){if(t.minimal!==!0)return r("div",{class:"q-date__header "+Q.value},[r("div",{class:"relative-position"},[r(xe,{name:"q-transition--fade"},()=>r("div",{key:"h-yr-"+Pe.value,class:"q-date__header-subtitle q-date__header-link "+(_.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:x.value,...M("vY",{onClick(){_.value="Years"},onKeyup(e){e.keyCode===13&&(_.value="Years")}})},[Pe.value]))]),r("div",{class:"q-date__header-title relative-position flex no-wrap"},[r("div",{class:"relative-position col"},[r(xe,{name:"q-transition--fade"},()=>r("div",{key:"h-sub"+se.value,class:"q-date__header-title-label q-date__header-link "+(_.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:x.value,...M("vC",{onClick(){_.value="Calendar"},onKeyup(e){e.keyCode===13&&(_.value="Calendar")}})},[se.value]))]),t.todayBtn===!0?r(U,{class:"q-date__header-today self-start",icon:D.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:x.value,onClick:$e}):null])])}function We({label:e,type:a,key:n,dir:s,goTo:i,boundaries:g,cls:c}){return[r("div",{class:"row items-center q-date__arrow"},[r(U,{round:!0,dense:!0,size:"sm",flat:!0,icon:he.value[0],tabindex:x.value,disable:g.prev===!1,...M("go-#"+a,{onClick(){i(-1)}})})]),r("div",{class:"relative-position overflow-hidden flex flex-center"+c},[r(xe,{name:"q-transition--jump-"+s},()=>r("div",{key:n},[r(U,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:x.value,...M("view#"+a,{onClick:()=>{_.value=a}})})]))]),r("div",{class:"row items-center q-date__arrow"},[r(U,{round:!0,dense:!0,size:"sm",flat:!0,icon:he.value[1],tabindex:x.value,disable:g.next===!1,...M("go+#"+a,{onClick(){i(1)}})})])]}const yt={Calendar:()=>[r("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[r("div",{class:"q-date__navigation row items-center no-wrap"},We({label:w.value.months[u.value.month-1],type:"Months",key:u.value.month,dir:ne.value,goTo:v,boundaries:Se.value.month,cls:" col"}).concat(We({label:u.value.year,type:"Years",key:u.value.year,dir:T.value,goTo:h,boundaries:Se.value.year,cls:""}))),r("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},He.value.map(e=>r("div",{class:"q-date__calendar-item"},[r("div",e)]))),r("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[r(xe,{name:"q-transition--slide-"+ne.value},()=>r("div",{key:A.value,class:"q-date__calendar-days fit"},de.value.map(e=>r("div",{class:e.classes},[e.in===!0?r(U,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:x.value,...M("day#"+e.i,{onClick:()=>{gt(e.i)},onMouseover:()=>{_t(e.i)}})},e.event!==!1?()=>r("div",{class:"q-date__event bg-"+e.event}):null):r("div",""+e.i)]))))])])],Months(){const e=u.value.year===f.value.year,a=s=>V.value!==null&&u.value.year===V.value.year&&V.value.month>s||O.value!==null&&u.value.year===O.value.year&&O.value.month<s,n=w.value.monthsShort.map((s,i)=>{const g=u.value.month===i+1;return r("div",{class:"q-date__months-item flex flex-center"},[r(U,{class:e===!0&&f.value.month===i+1?"q-date__today":null,flat:g!==!0,label:s,unelevated:g,color:g===!0?z.value:null,textColor:g===!0?p.value:null,tabindex:x.value,disable:a(i+1),...M("month#"+i,{onClick:()=>{$(i+1)}})})])});return t.yearsInMonthView===!0&&n.unshift(r("div",{class:"row no-wrap full-width"},[We({label:u.value.year,type:"Years",key:u.value.year,dir:T.value,goTo:h,boundaries:Se.value.year,cls:" col"})])),r("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const e=ie.value,a=e+ve,n=[],s=i=>V.value!==null&&V.value.year>i||O.value!==null&&O.value.year<i;for(let i=e;i<=a;i++){const g=u.value.year===i;n.push(r("div",{class:"q-date__years-item flex flex-center"},[r(U,{key:"yr"+i,class:f.value.year===i?"q-date__today":null,flat:!g,label:i,dense:!0,unelevated:g,color:g===!0?z.value:null,textColor:g===!0?p.value:null,tabindex:x.value,disable:s(i),...M("yr#"+i,{onClick:()=>{H(i)}})})]))}return r("div",{class:"q-date__view q-date__years flex flex-center"},[r("div",{class:"col-auto"},[r(U,{round:!0,dense:!0,flat:!0,icon:he.value[0],tabindex:x.value,disable:s(e),...M("y-",{onClick:()=>{ie.value-=ve}})})]),r("div",{class:"q-date__years-content col self-stretch row items-center"},n),r("div",{class:"col-auto"},[r(U,{round:!0,dense:!0,flat:!0,icon:he.value[1],tabindex:x.value,disable:s(a),...M("y+",{onClick:()=>{ie.value+=ve}})})])])}};function gt(e){const a={...u.value,day:e};if(t.range===!1){y(a,A.value);return}if(I.value===null){const n=de.value.find(i=>i.fill!==!0&&i.i===e);if(t.noUnset!==!0&&n.range!==void 0){Re({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Re(a);return}const s=X(a);I.value={init:a,initHash:s,final:a,finalHash:s},k("rangeStart",S(a))}else{const n=I.value.initHash,s=X(a),i=n<=s?{from:I.value.init,to:a}:{from:a,to:I.value.init};I.value=null,pe(n===s?a:{target:a,...i}),k("rangeEnd",{from:S(i.from),to:S(i.to)})}}function _t(e){if(I.value!==null){const a={...u.value,day:e};Object.assign(I.value,{final:a,finalHash:X(a)})}}return Object.assign(j,{setToday:$e,setView:Ee,offsetCalendar:Ne,setCalendarTo:G,setEditingRange:Ve}),()=>{const e=[r("div",{class:"q-date__content col relative-position"},[r(xe,{name:"q-transition--fade"},yt[_.value])])],a=ct(b.default);return a!==void 0&&e.push(r("div",{class:"q-date__actions"},a)),t.name!==void 0&&t.disable!==!0&&te(e,"push"),r("div",{class:re.value,...be.value},[ht(),r("div",{ref:ae,class:"q-date__main col column",tabindex:-1},e)])}}}),zt=Xe({name:"QPopupProxy",props:{...Yt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:b,emit:k,attrs:j}){const{proxy:D}=Ze(),{$q:Z}=D,M=F(!1),x=F(null),Q=d(()=>parseInt(t.breakpoint,10)),{canShow:N}=jt({showing:M});function K(){return Z.screen.width<Q.value||Z.screen.height<Q.value?"dialog":"menu"}const L=F(K()),ee=d(()=>L.value==="menu"?{maxHeight:"99vh"}:{});oe(()=>K(),q=>{M.value!==!0&&(L.value=q)});function te(q){M.value=!0,k("show",q)}function ae(q){M.value=!1,L.value=K(),k("hide",q)}return Object.assign(D,{show(q){N(q)===!0&&x.value.show(q)},hide(q){x.value.hide(q)},toggle(q){x.value.toggle(q)}}),kt(D,"currentComponent",()=>({type:L.value,ref:x.value})),()=>{const q={ref:x,...ee.value,...j,onShow:te,onHide:ae};let w;return L.value==="dialog"?w=xt:(w=Tt,Object.assign(q,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),r(w,q,b.default)}}});function Bt(t,b){if(t.hour!==null){if(t.minute===null)return"minute";if(b===!0&&t.second===null)return"second"}return"hour"}function $t(){const t=new Date;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}}const Qt=Xe({name:"QTime",props:{...ot,...ut,...vt,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:ft,setup(t,{slots:b,emit:k}){const j=Ze(),{$q:D}=j.proxy,Z=it(t,D),{tabindex:M,headerClass:x,getLocale:Q,getCurrentDate:N}=mt(t,D),K=rt(t),L=dt(K);let ee,te;const ae=F(null),q=d(()=>Pe()),w=d(()=>Q()),Te=d(()=>he()),fe=je(t.modelValue,q.value,w.value,t.calendar,Te.value),f=F(Bt(fe)),u=F(fe),_=F(fe.hour===null||fe.hour<12),Ie=d(()=>`q-time q-time--${t.landscape===!0?"landscape":"portrait"}`+(Z.value===!0?" q-time--dark q-dark":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-time--readonly":"")+(t.bordered===!0?" q-time--bordered":"")+(t.square===!0?" q-time--square no-border-radius":"")+(t.flat===!0?" q-time--flat no-shadow":"")),ne=d(()=>{const l=u.value;return{hour:l.hour===null?"--":T.value===!0?E(l.hour):String(_.value===!0?l.hour===0?12:l.hour:l.hour>12?l.hour-12:l.hour),minute:l.minute===null?"--":E(l.minute),second:l.second===null?"--":E(l.second)}}),T=d(()=>t.format24h!==null?t.format24h:D.lang.date.format24h),Ce=d(()=>{const l=f.value==="hour",o=l===!0?12:60,v=u.value[f.value];let H=`rotate(${Math.round(v*(360/o))-180}deg) translateX(-50%)`;return l===!0&&T.value===!0&&u.value.hour>=12&&(H+=" scale(.7)"),{transform:H}}),ie=d(()=>u.value.hour!==null),I=d(()=>ie.value===!0&&u.value.minute!==null),re=d(()=>t.hourOptions!==void 0?l=>t.hourOptions.includes(l):t.options!==void 0?l=>t.options(l,null,null):null),z=d(()=>t.minuteOptions!==void 0?l=>t.minuteOptions.includes(l):t.options!==void 0?l=>t.options(u.value.hour,l,null):null),p=d(()=>t.secondOptions!==void 0?l=>t.secondOptions.includes(l):t.options!==void 0?l=>t.options(u.value.hour,u.value.minute,l):null),P=d(()=>{if(re.value===null)return null;const l=se(0,11,re.value),o=se(12,11,re.value);return{am:l,pm:o,values:l.values.concat(o.values)}}),J=d(()=>z.value!==null?se(0,59,z.value):null),Y=d(()=>p.value!==null?se(0,59,p.value):null),R=d(()=>{switch(f.value){case"hour":return P.value;case"minute":return J.value;case"second":return Y.value}}),me=d(()=>{let l,o,v=0,h=1;const H=R.value!==null?R.value.values:void 0;f.value==="hour"?T.value===!0?(l=0,o=23):(l=0,o=11,_.value===!1&&(v=12)):(l=0,o=55,h=5);const $=[];for(let y=l,S=l;y<=o;y+=h,S++){const B=y+v,Le=H!==void 0&&H.includes(B)===!1,qe=f.value==="hour"&&y===0?T.value===!0?"00":"12":y;$.push({val:B,index:S,disable:Le,label:qe})}return $}),Me=d(()=>[[It,W,void 0,{stop:!0,prevent:!0,mouse:!0}]]);oe(()=>t.modelValue,l=>{const o=je(l,q.value,w.value,t.calendar,Te.value);(o.dateHash!==u.value.dateHash||o.timeHash!==u.value.timeHash)&&(u.value=o,o.hour===null?f.value="hour":_.value=o.hour<12)}),oe([q,w],()=>{Ge(()=>{Ve()})});function le(){const l={...N(),...$t()};Ve(l),Object.assign(u.value,l),f.value="hour"}function se(l,o,v){const h=Array.apply(null,{length:o+1}).map((H,$)=>{const y=$+l;return{index:y,val:v(y)===!0}}).filter(H=>H.val===!0).map(H=>H.index);return{min:h[0],max:h[h.length-1],values:h,threshold:o+1}}function Fe(l,o,v){const h=Math.abs(l-o);return Math.min(h,v-h)}function De(l,{min:o,max:v,values:h,threshold:H}){if(l===o)return o;if(l<o||l>v)return Fe(l,o,H)<=Fe(l,v,H)?o:v;const $=h.findIndex(B=>l<=B),y=h[$-1],S=h[$];return l-y<=S-l?y:S}function Pe(){return t.calendar!=="persian"&&t.mask!==null?t.mask:`HH:mm${t.withSeconds===!0?":ss":""}`}function he(){if(typeof t.defaultDate!="string"){const l=N(!0);return l.dateHash=X(l),l}return je(t.defaultDate,"YYYY/MM/DD",void 0,t.calendar)}function ye(){return Mt(j)===!0||R.value!==null&&(R.value.values.length===0||f.value==="hour"&&T.value!==!0&&P.value[_.value===!0?"am":"pm"].values.length===0)}function He(){const l=ae.value,{top:o,left:v,width:h}=l.getBoundingClientRect(),H=h/2;return{top:o+H,left:v+H,dist:H*.7}}function W(l){if(ye()!==!0){if(l.isFirst===!0){ee=He(),te=V(l.evt,ee);return}te=V(l.evt,ee,te),l.isFinal===!0&&(ee=!1,te=null,Ae())}}function Ae(){f.value==="hour"?f.value="minute":t.withSeconds&&f.value==="minute"&&(f.value="second")}function V(l,o,v){const h=Ct(l),H=Math.abs(h.top-o.top),$=Math.sqrt(Math.pow(Math.abs(h.top-o.top),2)+Math.pow(Math.abs(h.left-o.left),2));let y,S=Math.asin(H/$)*(180/Math.PI);if(h.top<o.top?S=o.left<h.left?90-S:270+S:S=o.left<h.left?S+90:270-S,f.value==="hour"){if(y=S/30,P.value!==null){const B=T.value!==!0?_.value===!0:P.value.am.values.length!==0&&P.value.pm.values.length!==0?$>=o.dist:P.value.am.values.length!==0;y=De(y+(B===!0?0:12),P.value[B===!0?"am":"pm"])}else y=Math.round(y),T.value===!0?$<o.dist?y<12&&(y+=12):y===12&&(y=0):_.value===!0&&y===12?y=0:_.value===!1&&y!==12&&(y+=12);T.value===!0&&(_.value=y<12)}else y=Math.round(S/6)%60,f.value==="minute"&&J.value!==null?y=De(y,J.value):f.value==="second"&&Y.value!==null&&(y=De(y,Y.value));return v!==y&&$e[f.value](y),y}const O={hour(){f.value="hour"},minute(){f.value="minute"},second(){f.value="second"}};function Se(l){l.keyCode===13&&Ee()}function ge(l){l.keyCode===13&&Ne()}function Be(l){ye()!==!0&&(D.platform.is.desktop!==!0&&V(l,He()),Ae())}function ce(l){ye()!==!0&&V(l,He())}function A(l){if(l.keyCode===13)f.value="hour";else if([37,39].includes(l.keyCode)){const o=l.keyCode===37?-1:1;if(P.value!==null){const v=T.value===!0?P.value.values:P.value[_.value===!0?"am":"pm"].values;if(v.length===0)return;if(u.value.hour===null)_e(v[0]);else{const h=(v.length+v.indexOf(u.value.hour)+o)%v.length;_e(v[h])}}else{const v=T.value===!0?24:12,h=T.value!==!0&&_.value===!1?12:0,H=u.value.hour===null?-o:u.value.hour;_e(h+(24+H+o)%v)}}}function ze(l){if(l.keyCode===13)f.value="minute";else if([37,39].includes(l.keyCode)){const o=l.keyCode===37?-1:1;if(J.value!==null){const v=J.value.values;if(v.length===0)return;if(u.value.minute===null)de(v[0]);else{const h=(v.length+v.indexOf(u.value.minute)+o)%v.length;de(v[h])}}else{const v=u.value.minute===null?-o:u.value.minute;de((60+v+o)%60)}}}function Qe(l){if(l.keyCode===13)f.value="second";else if([37,39].includes(l.keyCode)){const o=l.keyCode===37?-1:1;if(Y.value!==null){const v=Y.value.values;if(v.length===0)return;if(u.value.seconds===null)be(v[0]);else{const h=(v.length+v.indexOf(u.value.second)+o)%v.length;be(v[h])}}else{const v=u.value.second===null?-o:u.value.second;be((60+v+o)%60)}}}function _e(l){u.value.hour!==l&&(u.value.hour=l,G())}function de(l){u.value.minute!==l&&(u.value.minute=l,G())}function be(l){u.value.second!==l&&(u.value.second=l,G())}const $e={hour:_e,minute:de,second:be};function Ee(){_.value===!1&&(_.value=!0,u.value.hour!==null&&(u.value.hour-=12,G()))}function Ne(){_.value===!0&&(_.value=!1,u.value.hour!==null&&(u.value.hour+=12,G()))}function G(){if(re.value!==null&&re.value(u.value.hour)!==!0){u.value=je(),f.value="hour";return}if(z.value!==null&&z.value(u.value.minute)!==!0){u.value.minute=null,u.value.second=null,f.value="minute";return}if(t.withSeconds===!0&&p.value!==null&&p.value(u.value.second)!==!0){u.value.second=null,f.value="second";return}u.value.hour===null||u.value.minute===null||t.withSeconds===!0&&u.value.second===null||Ve()}function Ve(l){const o=Object.assign({...u.value},l),v=t.calendar==="persian"?E(o.hour)+":"+E(o.minute)+(t.withSeconds===!0?":"+E(o.second):""):st(new Date(o.year,o.month===null?null:o.month-1,o.day,o.hour,o.minute,o.second,o.millisecond),q.value,w.value,o.year,o.timezoneOffset);o.changed=v!==t.modelValue,k("update:modelValue",v,o)}function Ke(){const l=[r("div",{class:"q-time__link "+(f.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onClick:O.hour,onKeyup:A},ne.value.hour),r("div",":"),r("div",ie.value===!0?{class:"q-time__link "+(f.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onKeyup:ze,onClick:O.minute}:{class:"q-time__link"},ne.value.minute)];t.withSeconds===!0&&l.push(r("div",":"),r("div",I.value===!0?{class:"q-time__link "+(f.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onKeyup:Qe,onClick:O.second}:{class:"q-time__link"},ne.value.second));const o=[r("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},l)];return T.value===!1&&o.push(r("div",{class:"q-time__header-ampm column items-between no-wrap"},[r("div",{class:"q-time__link "+(_.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onClick:Ee,onKeyup:Se},"AM"),r("div",{class:"q-time__link "+(_.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:M.value,onClick:Ne,onKeyup:ge},"PM")])),r("div",{class:"q-time__header flex flex-center no-wrap "+x.value},o)}function Oe(){const l=u.value[f.value];return r("div",{class:"q-time__content col relative-position"},[r(xe,{name:"q-transition--scale"},()=>r("div",{key:"clock"+f.value,class:"q-time__container-parent absolute-full"},[r("div",{ref:ae,class:"q-time__container-child fit overflow-hidden"},[Dt(r("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Be,onMousedown:ce},[r("div",{class:"q-time__clock-circle fit"},[r("div",{class:"q-time__clock-pointer"+(u.value[f.value]===null?" hidden":t.color!==void 0?` text-${t.color}`:""),style:Ce.value}),me.value.map(o=>r("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${o.index}`+(o.val===l?" q-time__clock-position--active "+x.value:o.disable===!0?" q-time__clock-position--disable":"")},[r("span",o.label)]))])]),Me.value)])])),t.nowBtn===!0?r(U,{class:"q-time__now-button absolute",icon:D.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:t.color,textColor:t.textColor,tabindex:M.value,onClick:le}):null])}return j.proxy.setNow=le,()=>{const l=[Oe()],o=ct(b.default);return o!==void 0&&l.push(r("div",{class:"q-time__actions"},o)),t.name!==void 0&&t.disable!==!0&&L(l,"push"),r("div",{class:Ie.value,tabindex:-1},[Ke(),r("div",{class:"q-time__main col overflow-auto"},l)])}}});function lt(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const b=parseInt(t,10);return isNaN(b)?0:b}const pt=Ht({name:"close-popup",beforeMount(t,{value:b}){const k={depth:lt(b),handler(j){k.depth!==0&&setTimeout(()=>{const D=St(t);D!==void 0&&Vt(D,j,k.depth)})},handlerKey(j){Ot(j,13)===!0&&k.handler(j)}};t.__qclosepopup=k,t.addEventListener("click",k.handler),t.addEventListener("keyup",k.handlerKey)},updated(t,{value:b,oldValue:k}){b!==k&&(t.__qclosepopup.depth=lt(b))},beforeUnmount(t){const b=t.__qclosepopup;t.removeEventListener("click",b.handler),t.removeEventListener("keyup",b.handlerKey),delete t.__qclosepopup}});export{pt as C,zt as Q,Lt as a,Qt as b};
