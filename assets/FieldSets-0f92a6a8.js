import{k as O,F as L,r as v,R as S,$ as g,D as t,m as n,G as f,t as c,p as k,x as o,a0 as V,I as y,z as w,O as I,L as q,M as x,n as D,w as $,K as j,v as Q,a2 as z,a1 as A}from"./index-ff52cf3d.js";import{Q as P}from"./QBadge-43d1038a.js";import{u as U}from"./action-45ab2598.js";import{u as X}from"./useParentIdWatcher-56fc94ab.js";import{u as G}from"./useDialogs-a246c5f8.js";import{u as H}from"./useRouting-b63499da.js";import"./QSelect-645fbe4a.js";import"./QItem-786afa1b.js";import"./QItemLabel-12aca26d.js";import"./QMenu-900fcdd3.js";import"./selection-84b0a129.js";import"./ErrorStates.vue_vue_type_script_setup_true_lang-73a5f6dd.js";import"./ui-a8e57791.js";const K={key:0},W=c("div",{class:"text-weight-bold text-body1"},"Exercise Sets",-1),J={class:"row q-mb-sm"},Y=c("div",{class:"col"}," Sets organize the inputs you choose for this exercise into numbered groups that also display how you previously performed. Multiple sets must be enabled to add more than one set. ",-1),Z={key:0,class:"column reverse"},R={class:"col"},ee={class:"row q-mt-xs"},pe=O({__name:"FieldSets",setup(se){const{log:T}=L(),{confirmDialog:C}=G(),{route:h}=H(),l=U(),a=v([]),F=v(!1),u=v([null]),b=v(!1),d=v({});X(e=>{a.value=e==null?void 0:e.exerciseInputs,F.value=e==null?void 0:e.multipleSets,d.value=e.previousChild,h.name===S.CREATE?Object.values(g).forEach(s=>{a.value.includes(s)?l.record[t.getFieldForInput(s)]=[null]:delete l.record[t.getFieldForInput(s)]}):h.name===S.EDIT&&Object.values(g).forEach(s=>{a.value.includes(s)?_(l.record[t.getFieldForInput(s)]):delete l.record[t.getFieldForInput(s)]}),a.value.length>0?b.value=!0:b.value=!1});function _(e){u.value=new Array((e==null?void 0:e.length)||0).fill(null)}function M(){u.value.length>0&&u.value.length<V.MAX_SETS&&a.value.forEach(e=>{Object.values(g).includes(e)&&(l.record[t.getFieldForInput(e)].push(null),_(l.record[t.getFieldForInput(e)]))})}function B(){C("Remove Last Set","Are you sure you want to remove the last set?",y.REMOVE_SET,"warning",async()=>{try{u.value.length>1&&a.value.forEach(e=>{Object.values(g).includes(e)&&(l.record[t.getFieldForInput(e)].pop(),_(l.record[t.getFieldForInput(e)]))})}catch(e){T.error("Failed to remove last set",e)}})}function N(e,s){var m,r,i,p;return h.name===S.EDIT?(r=(m=d.value)==null?void 0:m[e])!=null&&r[s]?`Currently ${d.value[e][s]}`:"No previous value":(p=(i=d.value)==null?void 0:i[e])!=null&&p[s]?`Previous ${d.value[e][s]}`:"No previous value"}return(e,s)=>b.value?(n(),f("div",K,[W,c("div",J,[Y,F.value?(n(),f("div",Z,[c("div",null,[k(w,{disable:u.value.length>=o(V).MAX_SETS,color:"positive",class:"q-ml-sm",round:"",icon:o(y).ADD,onClick:s[0]||(s[0]=m=>M())},null,8,["disable","icon"]),k(w,{disable:u.value.length<=1,color:"negative",class:"q-ml-sm",round:"",icon:o(y).REMOVE,onClick:s[1]||(s[1]=m=>B())},null,8,["disable","icon"])])])):I("",!0)]),(n(!0),f(q,null,x(u.value,(m,r)=>(n(),f("div",{key:r,class:"row q-mb-md"},[F.value?(n(),D(P,{key:0,size:"lg",color:"secondary",class:"text-bold text-body1 q-mr-sm"},{default:$(()=>[j(Q(r+1),1)]),_:2},1024)):I("",!0),c("div",R,[c("div",ee,[(n(!0),f(q,null,x(a.value,(i,p)=>(n(),D(A,{key:p,"stack-label":"",class:"col-6 q-mb-xs",type:"number",filled:"",square:"",dense:"",modelValue:o(l).record[o(t).getFieldForInput(i)][r],"onUpdate:modelValue":E=>o(l).record[o(t).getFieldForInput(i)][r]=E,modelModifiers:{number:!0},rules:[E=>o(z).safeParse(E).success||"Required"],label:i,hint:N(o(t).getFieldForInput(i),r)},null,8,["modelValue","onUpdate:modelValue","rules","label","hint"]))),128))])])]))),128))])):I("",!0)}});export{pe as default};
