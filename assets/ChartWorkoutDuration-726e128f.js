import{Q as k}from"./QBadge-87c1ddb2.js";import{k as x,F as B,r,l as S,D as d,aO as L,bn as w,m as o,G as u,t as p,v as h,p as f,w as E,x as g,n as M,O as N}from"./index-9562c0c8.js";import{C as V,p as Y,a as O,b as R,B as W,c as F,L as I,P,d as Q,u as q,e as G,f as U}from"./useCharting-fd958d25.js";import{_ as $}from"./ErrorStates.vue_vue_type_script_setup_true_lang-2f7b118f.js";import{u as j}from"./ui-429798f5.js";const z={key:0},A={key:0},H={class:"text-caption"},J="Workout Duration (minutes)",ae=x({__name:"ChartWorkoutDuration",props:{id:{},parentTable:{}},setup(_){const n=_;V.register(Y,O,R,W,F,I,P,Q);const{log:C}=B(),{getSingleChartOptions:y,getSingleChartDataset:D}=U(),v=j(),i=r(!1),s=r(0),c=r({labels:[],datasets:[]});S(async()=>{await l()}),q(l);async function l(){try{const t=await d.getSortedChildren(d.getChildTable(n.parentTable),n.id);if(t.length===0)return;const a=t.filter(e=>new Date().getTime()-e.createdTimestamp<=L[v.chartTime]);s.value=a.length;const T=a.map(e=>w.formatDate(e.createdTimestamp,"YYYY MMM D")),b=a.map(e=>{if(e.createdTimestamp!==void 0&&e.finishedTimestamp!==void 0){const m=(e.finishedTimestamp-e.createdTimestamp)/6e4;return Number(m.toFixed(1))}else return 0});c.value={labels:T,datasets:[D(b,"primary","primary")]},i.value=!0}catch(t){C.error("Error loading workout duration chart",t)}}return(t,a)=>i.value?(o(),u("section",z,[s.value>0?(o(),u("div",A,[p("div",{class:"text-h6"},h(J)),f(k,{rounded:"",color:"secondary",class:"q-py-none"},{default:E(()=>[p("span",H,h(s.value)+" records in time frame",1)]),_:1}),f(g(G),{options:g(y)(),data:c.value,style:{"max-height":"500px"}},null,8,["options","data"])])):(o(),M($,{key:1,error:"no-data"}))])):N("",!0)}});export{ae as default};
