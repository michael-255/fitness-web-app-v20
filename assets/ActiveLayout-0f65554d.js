import{c as I,g as N,aY as O,aZ as p,a_ as $,r as h,b2 as P,e as d,ac as f,ai as K,f as M,h as w,b3 as W,k as j,F as E,l as U,D as Y,T as Z,m as V,n as B,w as r,p as n,b4 as G,b5 as J,x as g,b6 as X,b7 as H,b8 as ee,K as te,v as T,z as ae,I as z,R as oe,b9 as ne,ba as le,aS as se,au as ue,Q as re,t as ie,bb as ce}from"./index-17f30dc2.js";import{Q as R}from"./QSpace-0654e6fa.js";import{b as de}from"./index-b30a5205.js";const fe=I({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(a,{slots:_,emit:b}){const{proxy:{$q:i}}=N(),t=O($,p);if(t===p)return console.error("QFooter needs to be child of QLayout"),p;const s=h(parseInt(a.heightHint,10)),o=h(!0),c=h(P.value===!0||t.isContainer.value===!0?0:window.innerHeight),v=d(()=>a.reveal===!0||t.view.value.indexOf("F")>-1||i.platform.is.ios&&t.isContainer.value===!0),y=d(()=>t.isContainer.value===!0?t.containerHeight.value:c.value),Q=d(()=>{if(a.modelValue!==!0)return 0;if(v.value===!0)return o.value===!0?s.value:0;const e=t.scroll.value.position+y.value+s.value-t.height.value;return e>0?e:0}),C=d(()=>a.modelValue!==!0||v.value===!0&&o.value!==!0),F=d(()=>a.modelValue===!0&&C.value===!0&&a.reveal===!0),q=d(()=>"q-footer q-layout__section--marginal "+(v.value===!0?"fixed":"absolute")+"-bottom"+(a.bordered===!0?" q-footer--bordered":"")+(C.value===!0?" q-footer--hidden":"")+(a.modelValue!==!0?" q-layout--prevent-focus"+(v.value!==!0?" hidden":""):"")),D=d(()=>{const e=t.rows.value.bottom,l={};return e[0]==="l"&&t.left.space===!0&&(l[i.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),e[2]==="r"&&t.right.space===!0&&(l[i.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),l});function u(e,l){t.update("footer",e,l)}function m(e,l){e.value!==l&&(e.value=l)}function k({height:e}){m(s,e),u("size",e)}function S(){if(a.reveal!==!0)return;const{direction:e,position:l,inflectionPoint:L}=t.scroll.value;m(o,e==="up"||l-L<100||t.height.value-y.value-l-s.value<300)}function A(e){F.value===!0&&m(o,!0),b("focusin",e)}f(()=>a.modelValue,e=>{u("space",e),m(o,!0),t.animate()}),f(Q,e=>{u("offset",e)}),f(()=>a.reveal,e=>{e===!1&&m(o,a.modelValue)}),f(o,e=>{t.animate(),b("reveal",e)}),f([s,t.scroll,t.height],S),f(()=>i.screen.height,e=>{t.isContainer.value!==!0&&m(c,e)});const x={};return t.instances.footer=x,a.modelValue===!0&&u("size",s.value),u("space",a.modelValue),u("offset",Q.value),K(()=>{t.instances.footer===x&&(t.instances.footer=void 0,u("size",0),u("offset",0),u("space",!1))}),()=>{const e=M(_.default,[w(W,{debounce:0,onResize:k})]);return a.elevated===!0&&e.push(w("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),w("footer",{class:q.value,style:D.value,onFocusin:A},e)}}}),ve={class:"text-h6"},be=j({__name:"ActiveLayout",setup(a){const{log:_}=E(),b=de(1e3),i=h(""),t=h(Date.now()),s=h("");return U(async()=>{try{const{parentWorkout:o,workoutResult:c}=await Y.getActiveWorkout();o&&o.name&&(i.value=o.name),c&&c.createdTimestamp&&(t.value=c.createdTimestamp)}catch(o){_.error("Errors with active workout layout",o)}}),f(b,()=>{s.value=Z(Date.now()-t.value)||""}),(o,c)=>(V(),B(ce,{view:"hHh LpR fFf"},{default:r(()=>[n(G,{elevated:"",class:J(`bg-${g(X)}`)},{default:r(()=>[n(H,null,{default:r(()=>[n(ee,{class:"q-ml-xs"},{default:r(()=>[te(T(i.value),1)]),_:1}),n(ae,{flat:"",round:"",icon:g(z).BACK,to:{name:g(oe).DASHBOARD}},null,8,["icon","to"])]),_:1})]),_:1},8,["class"]),n(ne,null,{default:r(()=>[n(g(le),null,{default:r(({Component:v,route:y})=>[n(se,{name:"global-fade",mode:"out-in"},{default:r(()=>[(V(),B(ue(v),{key:y.path}))]),_:2},1024)]),_:1})]),_:1}),n(fe,{elevated:"",class:"bg-primary"},{default:r(()=>[n(H,null,{default:r(()=>[n(R),n(re,{name:g(z).STOPWATCH,size:"sm",class:"q-mr-sm"},null,8,["name"]),ie("div",ve,T(s.value),1),n(R)]),_:1})]),_:1})]),_:1}))}});export{be as default};
