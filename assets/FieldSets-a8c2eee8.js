import{k as B,F as O,r as v,R as y,aN as g,D as o,m as i,G as f,t as n,p as k,x as r,I,z as V,O as S,L as w,M as q,n as x,w as L,K as j,v as Q,bG as $,a0 as z,aM as P}from"./index-b13a5788.js";import{Q as A}from"./QBadge-165a1ab6.js";import{u as G}from"./action-823aca0e.js";import{u as U}from"./useParentIdWatcher-3c31ac76.js";import{u as H}from"./useDialogs-13e2612a.js";import{u as K}from"./useRouting-3262c112.js";import"./QSelect-33b37988.js";import"./QItem-b108e7f8.js";import"./QItemLabel-39c6e951.js";import"./QMenu-06157e07.js";import"./selection-6ea0221a.js";import"./ui-39a87d56.js";const W={key:0},X=n("div",{class:"text-weight-bold text-body1"},"Exercise Sets",-1),J={class:"row q-mb-sm"},Y=n("div",{class:"col"}," Sets organize the inputs you choose for this exercise into numbered groups that also display how you previously performed. Multiple sets must be enabled to add more than one set. ",-1),Z={key:0,class:"column reverse"},R={class:"col"},ee={class:"row q-mt-xs"},fe=B({__name:"FieldSets",setup(se){const{log:D}=O(),{confirmDialog:C}=H(),{route:F}=K(),t=G(),a=v([]),h=v(!1),c=v([null]),b=v(!1),d=v({});U(e=>{a.value=e==null?void 0:e.exerciseInputs,h.value=e==null?void 0:e.multipleSets,d.value=e.previousChild,F.name===y.CREATE?Object.values(g).forEach(s=>{a.value.includes(s)?t.record[o.getFieldForInput(s)]=[void 0]:delete t.record[o.getFieldForInput(s)]}):F.name===y.EDIT&&Object.values(g).forEach(s=>{a.value.includes(s)?_(t.record[o.getFieldForInput(s)]):delete t.record[o.getFieldForInput(s)]}),a.value.length>0?b.value=!0:b.value=!1});function _(e){c.value=new Array((e==null?void 0:e.length)||0).fill(null)}function M(){c.value.length>0&&c.value.length<P.MAX_SETS&&a.value.forEach(e=>{Object.values(g).includes(e)&&(t.record[o.getFieldForInput(e)].push(void 0),_(t.record[o.getFieldForInput(e)]))})}function N(){C("Remove Last Set","Are you sure you want to remove the last set?",I.REMOVE_SET,"warning",async()=>{try{c.value.length>1&&a.value.forEach(e=>{Object.values(g).includes(e)&&(t.record[o.getFieldForInput(e)].pop(),_(t.record[o.getFieldForInput(e)]))})}catch(e){D.error("Failed to remove last set",e)}})}function T(e,s){var m,l,u,p;return F.name===y.EDIT?(l=(m=d.value)==null?void 0:m[e])!=null&&l[s]?`Currently ${d.value[e][s]}`:"No previous value":(p=(u=d.value)==null?void 0:u[e])!=null&&p[s]?`Previous ${d.value[e][s]}`:"No previous value"}return(e,s)=>b.value?(i(),f("div",W,[X,n("div",J,[Y,h.value?(i(),f("div",Z,[n("div",null,[k(V,{color:"positive",class:"q-ml-sm",round:"",icon:r(I).ADD,onClick:s[0]||(s[0]=m=>M())},null,8,["icon"]),k(V,{color:"negative",class:"q-ml-sm",round:"",icon:r(I).REMOVE,onClick:s[1]||(s[1]=m=>N())},null,8,["icon"])])])):S("",!0)]),(i(!0),f(w,null,q(c.value,(m,l)=>(i(),f("div",{key:l,class:"row q-mb-md"},[h.value?(i(),x(A,{key:0,size:"lg",color:"secondary",class:"text-bold text-body1 q-mr-sm"},{default:L(()=>[j(Q(l+1),1)]),_:2},1024)):S("",!0),n("div",R,[n("div",ee,[(i(!0),f(w,null,q(a.value,(u,p)=>(i(),x(z,{key:p,"stack-label":"",class:"col-6 q-mb-xs",type:"number",filled:"",square:"",dense:"",modelValue:r(t).record[r(o).getFieldForInput(u)][l],"onUpdate:modelValue":E=>r(t).record[r(o).getFieldForInput(u)][l]=E,modelModifiers:{number:!0},rules:[E=>r($).safeParse(E).success||"Required"],label:u,hint:T(r(o).getFieldForInput(u),l)},null,8,["modelValue","onUpdate:modelValue","rules","label","hint"]))),128))])])]))),128))])):S("",!0)}});export{fe as default};
