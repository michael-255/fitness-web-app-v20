import{Q as x}from"./QBadge-15b9c958.js";import{k as S,F as T,r as n,l as w,D as i,$ as L,aO as k,bn as E,m as c,G as u,t as p,v as h,p as g,w as M,x as f,n as R,O as N}from"./index-4aa06bf7.js";import{C as O,p as V,a as Y,b as F,B as P,c as Q,L as $,P as q,d as A,u as G,e as I,f as U}from"./useCharting-27ca721c.js";import{_ as W}from"./ErrorStates.vue_vue_type_script_setup_true_lang-14a54128.js";import{u as j}from"./ui-c2fb7156.js";const z={key:0},H={key:0},J={class:"text-caption"},K="Best Calories Burned",re=S({__name:"ChartBestCalories",props:{id:{},parentTable:{}},setup(_){const t=_;O.register(V,Y,F,P,Q,$,q,A);const{log:C}=T(),{getSingleChartOptions:b,getSingleChartDataset:y}=U(),B=j(),l=n(!1),s=n(0),d=n({labels:[],datasets:[]});w(async()=>{await m()}),G(m);async function m(){try{const{exerciseInputs:e}=await i.getRecord(t.parentTable,t.id);if((e==null?void 0:e.length)===0||!(e!=null&&e.includes(L.CALORIES)))return;const r=await i.getSortedChildren(i.getChildTable(t.parentTable),t.id);if(r.length===0)return;const o=r.filter(a=>new Date().getTime()-a.createdTimestamp<=k[B.chartTime]);s.value=o.length;const D=o.map(a=>E.formatDate(a.createdTimestamp,"YYYY MMM D")),v=o.map(a=>Number(Math.max(...a.calories).toFixed(2)));d.value={labels:D,datasets:[y(v,"warning","warning")]},l.value=!0}catch(e){C.error("Error loading exercise best calories chart",e)}}return(e,r)=>l.value?(c(),u("section",z,[s.value>0?(c(),u("div",H,[p("div",{class:"text-h6"},h(K)),g(x,{rounded:"",color:"secondary",class:"q-py-none"},{default:M(()=>[p("span",J,h(s.value)+" records in time frame",1)]),_:1}),g(f(I),{options:f(b)(),data:d.value,style:{"max-height":"500px"}},null,8,["options","data"])])):(c(),R(W,{key:1,error:"no-data"}))])):N("",!0)}});export{re as default};
