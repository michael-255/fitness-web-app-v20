import{Q as k}from"./QBadge-e173d29a.js";import{k as x,F as R,r as c,l as M,D as l,$ as p,aO as V,bn as W,m as d,G as f,t as _,v as C,p as b,w as Y,x as T,n as N,O}from"./index-6fe5ade6.js";import{C as P,p as G,a as Q,b as $,B as q,c as F,L as H,P as U,d as j,u as z,e as A,f as J}from"./useCharting-97938e24.js";import{_ as K}from"./ErrorStates.vue_vue_type_script_setup_true_lang-bb0c1632.js";import{u as X}from"./ui-7fcdaaf0.js";const Z={key:0},I={key:0},ee={class:"text-caption"},te="Total Weight (lbs)",ce=x({__name:"ChartTotalWeight",props:{id:{},parentTable:{}},setup(w){const a=w;P.register(G,Q,$,q,F,H,U,j);const{log:y}=R(),{getSingleChartOptions:D,getSingleChartDataset:v}=J(),S=X(),m=c(!1),s=c(0),u=c({labels:[],datasets:[]});M(async()=>{await h()}),z(h);async function h(){try{const{exerciseInputs:e}=await l.getRecord(a.parentTable,a.id);if(e!=null&&e.length&&e.length<2||!(e!=null&&e.includes(p.WEIGHT))||!(e!=null&&e.includes(p.REPS)))return;const r=await l.getSortedChildren(l.getChildTable(a.parentTable),a.id);if(r.length===0)return;const n=r.filter(t=>new Date().getTime()-t.createdTimestamp<=V[S.chartTime]);s.value=n.length;const B=n.map(t=>W.formatDate(t.createdTimestamp,"YYYY MMM D")),E=n.map(t=>{const g=t.reps,L=t.weightLbs;return g.map((o,i)=>o*L[i]).reduce((o,i)=>o+i,0)});u.value={labels:B,datasets:[v(E,"warning","warning")]},m.value=!0}catch(e){y.error("Error loading exercise total weight chart",e)}}return(e,r)=>m.value?(d(),f("section",Z,[s.value>0?(d(),f("div",I,[_("div",{class:"text-h6"},C(te)),b(k,{rounded:"",color:"secondary",class:"q-py-none"},{default:Y(()=>[_("span",ee,C(s.value)+" records in time frame",1)]),_:1}),b(T(A),{options:T(D)(),data:u.value,style:{"max-height":"500px"}},null,8,["options","data"])])):(d(),N(K,{key:1,error:"no-data"}))])):O("",!0)}});export{ce as default};
