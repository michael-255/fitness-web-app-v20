import{Q as T}from"./QBadge-15b9c958.js";import{k as x,F as S,r as o,l as k,D as i,$ as L,aO as w,bn as E,m as c,G as m,t as p,v as h,p as f,w as M,x as g,n as N,O as R}from"./index-4aa06bf7.js";import{C as O,p as V,a as Y,b as F,B as P,c as Q,L as U,P as $,d as q,u as A,e as G,f as I}from"./useCharting-27ca721c.js";import{_ as W}from"./ErrorStates.vue_vue_type_script_setup_true_lang-14a54128.js";import{u as j}from"./ui-c2fb7156.js";const z={key:0},H={key:0},J={class:"text-caption"},K="Best Duration (minutes)",re=x({__name:"ChartBestDuration",props:{id:{},parentTable:{}},setup(_){const a=_;O.register(V,Y,F,P,Q,U,$,q);const{log:C}=S(),{getSingleChartOptions:D,getSingleChartDataset:b}=I(),y=j(),l=o(!1),s=o(0),d=o({labels:[],datasets:[]});k(async()=>{await u()}),A(u);async function u(){try{const{exerciseInputs:e}=await i.getRecord(a.parentTable,a.id);if((e==null?void 0:e.length)===0||!(e!=null&&e.includes(L.DURATION)))return;const r=await i.getSortedChildren(i.getChildTable(a.parentTable),a.id);if(r.length===0)return;const n=r.filter(t=>new Date().getTime()-t.createdTimestamp<=w[y.chartTime]);s.value=n.length;const v=n.map(t=>E.formatDate(t.createdTimestamp,"YYYY MMM D")),B=n.map(t=>Number(Math.max(...t.durationMinutes).toFixed(2)));d.value={labels:v,datasets:[b(B,"accent","accent")]},l.value=!0}catch(e){C.error("Error loading exercise best duration chart",e)}}return(e,r)=>l.value?(c(),m("section",z,[s.value>0?(c(),m("div",H,[p("div",{class:"text-h6"},h(K)),f(T,{rounded:"",color:"secondary",class:"q-py-none"},{default:M(()=>[p("span",J,h(s.value)+" records in time frame",1)]),_:1}),f(g(G),{options:g(D)(),data:d.value,style:{"max-height":"500px"}},null,8,["options","data"])])):(c(),N(W,{key:1,error:"no-data"}))])):R("",!0)}});export{re as default};
