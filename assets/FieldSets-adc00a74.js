import{k as O,F as L,r as v,R as S,$ as g,D as t,m as n,G as p,t as c,p as k,x as l,a0 as V,I as y,z as w,O as I,L as q,M as x,n as D,w as $,K as j,v as Q,a2 as z,a1 as A}from"./index-afd40d31.js";import{Q as P}from"./QBadge-5af00b99.js";import{u as U}from"./action-26d9d03d.js";import{u as X}from"./useParentIdWatcher-33149a0e.js";import{u as G}from"./useDialogs-053a2e34.js";import{u as H}from"./useRouting-3addc417.js";import"./QSelect-05443f30.js";import"./QItem-65c69d1a.js";import"./QItemLabel-e63258de.js";import"./QMenu-05fbd3c3.js";import"./selection-03e6f2ed.js";import"./QSpace-187a2b1e.js";import"./ErrorStates.vue_vue_type_script_setup_true_lang-2b35ac5c.js";import"./ui-f0b5a98d.js";const K={key:0},W=c("div",{class:"text-weight-bold text-body1"},"Exercise Sets",-1),J={class:"row q-mb-sm"},Y=c("div",{class:"col"}," Sets organize the inputs you choose for this exercise into numbered groups that also display how you previously performed. Multiple sets must be enabled to add more than one set. ",-1),Z={key:0,class:"column reverse"},R={class:"col"},ee={class:"row q-mt-xs"},ge=O({__name:"FieldSets",setup(se){const{log:T}=L(),{confirmDialog:C}=G(),{route:h}=H(),o=U(),a=v([]),F=v(!1),u=v([null]),b=v(!1),d=v({});X(e=>{a.value=e==null?void 0:e.exerciseInputs,F.value=e==null?void 0:e.multipleSets,d.value=e.previousChild,h.name===S.CREATE?Object.values(g).forEach(s=>{a.value.includes(s)?o.record[t.getFieldForInput(s)]=[null]:delete o.record[t.getFieldForInput(s)]}):h.name===S.EDIT&&Object.values(g).forEach(s=>{a.value.includes(s)?_(o.record[t.getFieldForInput(s)]):delete o.record[t.getFieldForInput(s)]}),a.value.length>0?b.value=!0:b.value=!1});function _(e){u.value=new Array((e==null?void 0:e.length)||0).fill(null)}function M(){u.value.length>0&&u.value.length<V.MAX_SETS&&a.value.forEach(e=>{Object.values(g).includes(e)&&(o.record[t.getFieldForInput(e)].push(null),_(o.record[t.getFieldForInput(e)]))})}function B(){C("Remove Last Set","Are you sure you want to remove the last set?",y.REMOVE_SET,"warning",async()=>{try{u.value.length>1&&a.value.forEach(e=>{Object.values(g).includes(e)&&(o.record[t.getFieldForInput(e)].pop(),_(o.record[t.getFieldForInput(e)]))})}catch(e){T.error("Failed to remove last set",e)}})}function N(e,s){var m,r,i,f;return h.name===S.EDIT?(r=(m=d.value)==null?void 0:m[e])!=null&&r[s]?`Currently ${d.value[e][s]}`:"No previous value":(f=(i=d.value)==null?void 0:i[e])!=null&&f[s]?`Previous ${d.value[e][s]}`:"No previous value"}return(e,s)=>b.value?(n(),p("div",K,[W,c("div",J,[Y,F.value?(n(),p("div",Z,[c("div",null,[k(w,{disable:u.value.length>=l(V).MAX_SETS,color:"positive",class:"q-ml-sm",round:"",icon:l(y).ADD,onClick:s[0]||(s[0]=m=>M())},null,8,["disable","icon"]),k(w,{disable:u.value.length<=1,color:"negative",class:"q-ml-sm",round:"",icon:l(y).REMOVE,onClick:s[1]||(s[1]=m=>B())},null,8,["disable","icon"])])])):I("",!0)]),(n(!0),p(q,null,x(u.value,(m,r)=>(n(),p("div",{key:r,class:"row q-mb-md"},[F.value?(n(),D(P,{key:0,size:"lg",color:"secondary",class:"text-bold text-body1 q-mr-sm"},{default:$(()=>[j(Q(r+1),1)]),_:2},1024)):I("",!0),c("div",R,[c("div",ee,[(n(!0),p(q,null,x(a.value,(i,f)=>(n(),D(A,{key:f,"stack-label":"",class:"col-6 q-mb-xs",type:"number",step:"0.01",filled:"",square:"",dense:"",modelValue:l(o).record[l(t).getFieldForInput(i)][r],"onUpdate:modelValue":E=>l(o).record[l(t).getFieldForInput(i)][r]=E,modelModifiers:{number:!0},rules:[E=>l(z).safeParse(E).success||"Required"],label:i,hint:N(l(t).getFieldForInput(i),r)},null,8,["modelValue","onUpdate:modelValue","rules","label","hint"]))),128))])])]))),128))])):I("",!0)}});export{ge as default};
